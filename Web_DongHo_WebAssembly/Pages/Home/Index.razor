@page "/home"
@using Web_DongHo_WebAssembly.Data
@inject HttpClient Http
@inherits LayoutComponentBase
@inject NavigationManager NavigationManager

@code {
    private List<Product> productfirst8 = new List<Product>();
    private List<Product> productsecond8 = new List<Product>();
    private List<Product> productthird8 = new List<Product>();
    private bool loading = true;
    private string errorMessage;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            var response = await Http.GetFromJsonAsync<ProductResponse>("api/products/home-products");
            if (response != null)
            {
                productfirst8 = response.Productfirst8;
                productsecond8 = response.Productsecond8;
                productthird8 = response.ProductThird8;
            }
        }
        catch (Exception ex)
        {
            errorMessage = $"Error loading products: {ex.Message}";
        }
        finally
        {
            loading = false;
        }
    }

    private class ProductResponse
    {
        public List<Product> Productfirst8 { get; set; }
        public List<Product> Productsecond8 { get; set; }
        public List<Product> ProductThird8 { get; set; }
    }
}   
<div>
    <div class="container my-5">
        <div class="home-title text-white my-4">
            <h3>Sản Phẩm Nổi bật</h3>
        </div>
        <div id="featuredProductsCarousel" class="carousel slide position-relative" data-bs-ride="carousel">
            <div class="carousel-inner">
                <div class="carousel-item active" data-bs-interval="5000">
                    <div class="row">
                        @foreach (var item in productfirst8)
                        {
                            <div class="col-md-3 my-3 product">
                                <div>
                                    <div class="card">
                                        <div class="imgBox">
                                            <a class="card-link" href="@($"/ProductDetail/Index/{item.ProductId}")">
                                                @if (item.ProductImageList.Any())
                                                {
                                                    <img src="@($"/uploads/{item.ProductImageList.First()}")" alt="@item.ProductName" class="watch">
                                                }
                                                else
                                                {
                                                    <img src="~/uploads/default.png" alt="default image" class="watch">
                                                }
                                            </a>
                                        </div>
                                        <div class="contentBox">
                                            <h3>@item.ProductName</h3>
                                            <h2 class="price">@item.ProductPrice.ToString("#,##0").Replace(",", ".") ₫</h2>
                                            <button class="buy bg-btn addProduct" data-product-id="@item.ProductId">Thêm vào giỏ hàng</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                </div>
                <div class="carousel-item" data-bs-interval="5000">
                    <div class="row">
                        @foreach (var item in productfirst8)
                        {
                            <div class="col-md-3 my-3 product">
                                <div>
                                    <div class="card">
                                        <div class="imgBox">
                                            <a class="card-link" href="@($"/ProductDetail/Index/{item.ProductId}")">
                                                @if (item.ProductImageList.Any())
                                                {
                                                    <img src="@($"/uploads/{item.ProductImageList.First()}")" alt="@item.ProductName" class="watch">
                                                }
                                                else
                                                {
                                                    <img src="~/uploads/default.png" alt="default image" class="watch">
                                                }
                                            </a>
                                        </div>
                                        <div class="contentBox">
                                            <h3>@item.ProductName</h3>
                                            <h2 class="price">@item.ProductPrice.ToString("#,##0").Replace(",", ".") ₫</h2>
                                            <button class="buy bg-btn addProduct" data-product-id="@item.ProductId">Thêm vào giỏ hàng</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                </div>
            </div>
            <div class="btnList">
                <button class="carousel-control-prev position-absolute" type="button" data-bs-target="#featuredProductsCarousel" data-bs-slide="prev" style="left:-120px!important;height:fit-content;top:220px!important">
                    <span aria-hidden="true"><i class="fa-solid fa-arrow-left-long" style="font-size:24px; color:darkgray;"></i></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next position-absolute" type="button" data-bs-target="#featuredProductsCarousel" data-bs-slide="next" style="right: -120px !important;height:fit-content; top: 220px !important">
                    <span aria-hidden="true"><i class="fa-solid fa-arrow-right-long" style="font-size: 24px; color: darkgray;"></i></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
        </div>
    </div>
    <div style="background-color: #393939">
        <div class="container my-5">
            <div class="home-title text-white my-4">
                <h3>Sản Phẩm Khác</h3>
            </div>
            <div class="row">
                @foreach (var item in productsecond8)
                {
                    <div class="col-md-3 my-3 product">
                        <div>
                            <div class="card">
                                <div class="imgBox">
                                    <a class="card-link" href="@($"/ProductDetail/Index/{item.ProductId}")">
                                        @if (item.ProductImageList.Any())
                                        {
                                            <img src="@($"/uploads/{item.ProductImageList.First()}")" alt="@item.ProductName" class="watch">
                                        }
                                        else
                                        {
                                            <img src="~/uploads/default.png" alt="default image" class="watch">
                                        }
                                    </a>
                                </div>
                                <div class="contentBox">
                                    <h3>@item.ProductName</h3>
                                    <h2 class="price">@item.ProductPrice.ToString("#,##0").Replace(",", ".") ₫</h2>
                                    <button class="buy bg-btn addProduct" data-product-id="@item.ProductId">Thêm vào giỏ hàng</button>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
    <div class="container my-5">
        <div class="home-title text-white my-4">
            <h3>Video Sản Phẩm</h3>
        </div>
        <div id="featuredProductsCarousel" class="carousel slide position-relative" data-bs-ride="carousel">
            <div id="carouselExampleIndicators" class="carousel slide">
                <div class="carousel-indicators">
                    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2"></button>
                    <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3"></button>
                </div>
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <iframe width="1260" height="500" src="https://www.youtube.com/embed/x4KFwDQnGks?si=WTQ4I1tFS8p4c9zo?&mute=1" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                    </div>
                    <div class="carousel-item">
                        <iframe width="1260" height="500" src="https://www.youtube.com/embed/duZc9xyDpss?si=C6szmFT-PZ-z1b4_?&mute=1" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                    </div>
                    <div class="carousel-item">
                        <iframe width="1260" height="500" src="https://www.youtube.com/embed/fFWA9Pt9WVI?si=E1_2zkTTbuH70pVZ?&mute=1" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                    </div>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
        </div>
    </div>
    <div class="container text-center my-5">
        <h1>Giới Thiệu Về Đồng Hồ</h1>
        <div class="container-xxl pb-3 text-start">
            <div class="row">
                <div class="col-md-6">
                    <p class="justify-content">Đồng hồ đeo tay là một loại phụ kiện thời trang được thiết kế để đeo quanh cổ tay và sử dụng để xem giờ. Đồng hồ đeo tay có thể được làm từ nhiều chất liệu khác nhau như kim loại, da, nhựa, v.v., và có nhiều kiểu dáng và mẫu mã đa dạng để phù hợp với nhu cầu và sở thích của từng người.</p>
                    <p class="justify-content">Ngoài chức năng chính là xem giờ, đồng hồ đeo tay còn có thể tích hợp nhiều tính năng khác như đo nhịp tim, đếm bước chân, định vị GPS, thông báo cuộc gọi và tin nhắn, v.v. Điều này giúp đồng hồ đeo tay trở thành một thiết bị đa năng và hữu ích trong cuộc sống hàng ngày.</p>
                    <p class="justify-content">Với sự phát triển của công nghệ, đồng hồ đeo tay ngày càng trở nên thông minh hơn và được tích hợp nhiều tính năng hiện đại. Các hãng đồng hồ nổi tiếng như Apple, Samsung, Garmin, v.v. đã cho ra đời những mẫu đồng hồ thông minh với khả năng kết nối với điện thoại di động và các thiết bị khác để mang lại trải nghiệm tốt nhất cho người dùng.</p>
                    <p class="justify-content">Đồng hồ đeo tay không chỉ là một công cụ để xem giờ mà còn là một biểu tượng thời trang và phong cách cá nhân. Việc lựa chọn một chiếc đồng hồ đeo tay phù hợp có thể giúp tôn lên vẻ đẹp và cái tôi của mỗi người.</p>
                </div>
                <div class="col-md-6">
                    <img src="https://thumuadonghohieu.com/uploaded/img/thumb/Thu%20mua%20dong%20ho%20hieu%20cu%20hinh%201.jpg" class="img-fluid rounded" alt="đồng hồ" />
                </div>
            </div>
        </div>
    </div>
    <div class="container-xxl pb-3 text-start">
        <div class="container-xxl pb-3 text-start">
            <div class="home-title text-white my-4">
                <h3>Thông Tin Liên Hệ</h3>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="mapouter">
                        <div class="gmap_canvas"><iframe width="500" height="350" id="gmap_canvas" src="https://maps.google.com/maps?q=379%20%C4%90.%20An%20D%C6%B0%C6%A1ng%20V%C6%B0%C6%A1ng,%20Ph%C6%B0%E1%BB%9Dng%203,%20Qu%E1%BA%ADn%205,%20Th%C3%A0nh%20ph%E1%BB%91%20H%E1%BB%93%20Ch%C3%AD%20Minh%2070000&t=&z=17&ie=UTF8&iwloc=&output=embed" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"></iframe></div>
                        <style>
                            .mapouter {
                                position: relative;
                                text-align: right;
                                height: 350px;
                                width: 500px;
                            }

                            .gmap_canvas {
                                overflow: hidden;
                                background: none !important;
                                height: 350px;
                                width: 500px;
                            }</style>
                    </div>
                </div>
                <div class="col-md-6">
                    <p class="justify-content">Nếu bạn có bất kỳ câu hỏi nào về sản phẩm hoặc cần hỗ trợ, vui lòng liên hệ với chúng tôi theo thông tin dưới đây:</p>
                    <ul class="justify-content">
                        <li>Email: support@dongho.com</li>
                        <li>Điện thoại: 0123-456-789</li>
                        <li>Địa chỉ: 379 Đ. An Dương Vương, Phường 3, Quận 5, Thành phố Hồ Chí Minh</li>
                    </ul>
                    <p class="justify-content">Chúng tôi sẽ cố gắng phản hồi bạn trong thời gian sớm nhất. Cảm ơn bạn đã tin tưởng và ủng hộ sản phẩm của chúng tôi!</p>
                </div>
            </div>
        </div>
    </div>
</div>
