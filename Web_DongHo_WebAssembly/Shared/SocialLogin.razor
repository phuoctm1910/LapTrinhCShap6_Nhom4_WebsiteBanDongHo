@inject NavigationManager Navigation
@inject IJSRuntime JS

<div class="social-login">
    <a @onclick="LoginWithGoogle" class="link">
        <img src="https://i.pinimg.com/originals/84/c7/00/84c7007eb6ac4374f77394d1e4954a96.png" alt="">
        <h6>Google</h6>
    </a>
    <a href="#" class="link">
        <img src="https://upload.wikimedia.org/wikipedia/commons/6/6c/Facebook_Logo_2023.png" alt="">
        <h6>Facebook</h6>
    </a>
    <a href="#" class="link">
        <img src="https://img.freepik.com/free-vector/new-2023-twitter-logo-x-icon-design_1017-45418.jpg?size=338&ext=jpg&ga=GA1.1.1369675164.1715558400&semt=ais_user" alt="">
        <h6>Twitter</h6>
    </a>
</div>

@if (!string.IsNullOrEmpty(errorMessage))
{
    <div class="alert alert-danger">
        @errorMessage
    </div>
}

@code {
    private string errorMessage;

    private async Task LoginWithGoogle()
    {
        try
        {
            var url = "https://localhost:44355/api/Account/google-login";
            Navigation.NavigateTo(url, true);
        }
        catch (Exception ex)
        {
            errorMessage = $"An error occurred: {ex.Message}";
            Console.WriteLine(errorMessage);
            await JS.InvokeVoidAsync("alert", errorMessage);
        }
    }

    private async void OnLoginSuccess()
    {
       
        Navigation.NavigateTo("/"); 
    }
}
